[default reserve_graph_table]
[default language_features=NONE,+LIKE_ANY_SOME_ALL,+SQL_GRAPH,+SQL_GRAPH_ADVANCED_QUERY]

GRAPH aml
MATCH (n:Person)
RETURN {{ ARRAY | EXISTS | VALUE}} { {{ | GRAPH aml}} {{ | MATCH (p:Person) }} RETURN 1 as one } as arr
--
ALTERNATION GROUP:  ARRAY , , 
--
QueryStatement [0-72] [GRAPH aml...one } as arr]
  Query [0-72] [GRAPH aml...one } as arr]
    GqlQuery [0-72] [GRAPH aml...one } as arr]
      GraphTableQuery [0-72] [GRAPH aml...one } as arr]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-72] [MATCH (n:Person...one } as arr]
          GqlOperatorList [10-72] [MATCH (n:Person...one } as arr]
            GqlMatch [10-26] [MATCH (n:Person)]
              GraphPattern [16-26] [(n:Person)]
                GraphPathPattern [16-26] [(n:Person)]
                  GraphNodePattern [16-26] [(n:Person)]
                    GraphElementPatternFiller [17-25] [n:Person]
                      Identifier(n) [17-18] [n]
                      GraphLabelFilter [18-25] [:Person]
                        GraphElementLabel [19-25] [Person]
                          Identifier(Person) [19-25] [Person]
            GqlReturn [27-72] [RETURN  ARRAY...one } as arr]
              Select [35-72] [ARRAY  {...one } as arr]
                SelectList [35-72] [ARRAY  {...one } as arr]
                  SelectColumn [35-72] [ARRAY  {...one } as arr]
                    ExpressionSubquery(modifier=ARRAY) [35-65] [ARRAY  {     RETURN 1 as one }]
                      Query [42-65] [{     RETURN 1 as one }]
                        GqlQuery [42-65] [{     RETURN 1 as one }]
                          GraphTableQuery [42-65] [{     RETURN 1 as one }]
                            GqlOperatorList [48-63] [RETURN 1 as one]
                              GqlOperatorList [48-63] [RETURN 1 as one]
                                GqlReturn [48-63] [RETURN 1 as one]
                                  Select [55-63] [1 as one]
                                    SelectList [55-63] [1 as one]
                                      SelectColumn [55-63] [1 as one]
                                        IntLiteral(1) [55-56] [1]
                                        Alias [57-63] [as one]
                                          Identifier(one) [60-63] [one]
                    Alias [66-72] [as arr]
                      Identifier(arr) [69-72] [arr]
--
GRAPH aml
MATCH
  (n
  IS Person)
RETURN
  ARRAY {
    RETURN
      1 AS one
  } AS arr
--
ALTERNATION GROUP:  ARRAY , , MATCH (p:Person) 
--
QueryStatement [0-89] [GRAPH aml...one } as arr]
  Query [0-89] [GRAPH aml...one } as arr]
    GqlQuery [0-89] [GRAPH aml...one } as arr]
      GraphTableQuery [0-89] [GRAPH aml...one } as arr]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-89] [MATCH (n:Person...one } as arr]
          GqlOperatorList [10-89] [MATCH (n:Person...one } as arr]
            GqlMatch [10-26] [MATCH (n:Person)]
              GraphPattern [16-26] [(n:Person)]
                GraphPathPattern [16-26] [(n:Person)]
                  GraphNodePattern [16-26] [(n:Person)]
                    GraphElementPatternFiller [17-25] [n:Person]
                      Identifier(n) [17-18] [n]
                      GraphLabelFilter [18-25] [:Person]
                        GraphElementLabel [19-25] [Person]
                          Identifier(Person) [19-25] [Person]
            GqlReturn [27-89] [RETURN  ARRAY...one } as arr]
              Select [35-89] [ARRAY  {...one } as arr]
                SelectList [35-89] [ARRAY  {...one } as arr]
                  SelectColumn [35-89] [ARRAY  {...one } as arr]
                    ExpressionSubquery(modifier=ARRAY) [35-82] [ARRAY  {...1 as one }]
                      Query [42-82] [{    MATCH...1 as one }]
                        GqlQuery [42-82] [{    MATCH...1 as one }]
                          GraphTableQuery [42-82] [{    MATCH...1 as one }]
                            GqlOperatorList [47-80] [MATCH (p:Person...URN 1 as one]
                              GqlOperatorList [47-80] [MATCH (p:Person...URN 1 as one]
                                GqlMatch [47-63] [MATCH (p:Person)]
                                  GraphPattern [53-63] [(p:Person)]
                                    GraphPathPattern [53-63] [(p:Person)]
                                      GraphNodePattern [53-63] [(p:Person)]
                                        GraphElementPatternFiller [54-62] [p:Person]
                                          Identifier(p) [54-55] [p]
                                          GraphLabelFilter [55-62] [:Person]
                                            GraphElementLabel [56-62] [Person]
                                              Identifier(Person) [56-62] [Person]
                                GqlReturn [65-80] [RETURN 1 as one]
                                  Select [72-80] [1 as one]
                                    SelectList [72-80] [1 as one]
                                      SelectColumn [72-80] [1 as one]
                                        IntLiteral(1) [72-73] [1]
                                        Alias [74-80] [as one]
                                          Identifier(one) [77-80] [one]
                    Alias [83-89] [as arr]
                      Identifier(arr) [86-89] [arr]
--
GRAPH aml
MATCH
  (n
  IS Person)
RETURN
  ARRAY {
    MATCH
      (p
      IS Person)
    RETURN
      1 AS one
  } AS arr
--
ALTERNATION GROUP:  ARRAY , GRAPH aml, 
--
QueryStatement [0-81] [GRAPH aml...one } as arr]
  Query [0-81] [GRAPH aml...one } as arr]
    GqlQuery [0-81] [GRAPH aml...one } as arr]
      GraphTableQuery [0-81] [GRAPH aml...one } as arr]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-81] [MATCH (n:Person...one } as arr]
          GqlOperatorList [10-81] [MATCH (n:Person...one } as arr]
            GqlMatch [10-26] [MATCH (n:Person)]
              GraphPattern [16-26] [(n:Person)]
                GraphPathPattern [16-26] [(n:Person)]
                  GraphNodePattern [16-26] [(n:Person)]
                    GraphElementPatternFiller [17-25] [n:Person]
                      Identifier(n) [17-18] [n]
                      GraphLabelFilter [18-25] [:Person]
                        GraphElementLabel [19-25] [Person]
                          Identifier(Person) [19-25] [Person]
            GqlReturn [27-81] [RETURN  ARRAY...one } as arr]
              Select [35-81] [ARRAY  {...one } as arr]
                SelectList [35-81] [ARRAY  {...one } as arr]
                  SelectColumn [35-81] [ARRAY  {...one } as arr]
                    ExpressionSubquery(modifier=ARRAY) [35-74] [ARRAY  {...1 as one }]
                      Query [42-74] [{  GRAPH aml...1 as one }]
                        GqlQuery [42-74] [{  GRAPH aml...1 as one }]
                          GraphTableQuery [42-74] [{  GRAPH aml...1 as one }]
                            PathExpression [51-54] [aml]
                              Identifier(aml) [51-54] [aml]
                            GqlOperatorList [57-72] [RETURN 1 as one]
                              GqlOperatorList [57-72] [RETURN 1 as one]
                                GqlReturn [57-72] [RETURN 1 as one]
                                  Select [64-72] [1 as one]
                                    SelectList [64-72] [1 as one]
                                      SelectColumn [64-72] [1 as one]
                                        IntLiteral(1) [64-65] [1]
                                        Alias [66-72] [as one]
                                          Identifier(one) [69-72] [one]
                    Alias [75-81] [as arr]
                      Identifier(arr) [78-81] [arr]
--
GRAPH aml
MATCH
  (n
  IS Person)
RETURN
  ARRAY {
    GRAPH aml
    RETURN
      1 AS one
  } AS arr
--
ALTERNATION GROUP:  ARRAY , GRAPH aml, MATCH (p:Person) 
--
QueryStatement [0-98] [GRAPH aml...one } as arr]
  Query [0-98] [GRAPH aml...one } as arr]
    GqlQuery [0-98] [GRAPH aml...one } as arr]
      GraphTableQuery [0-98] [GRAPH aml...one } as arr]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-98] [MATCH (n:Person...one } as arr]
          GqlOperatorList [10-98] [MATCH (n:Person...one } as arr]
            GqlMatch [10-26] [MATCH (n:Person)]
              GraphPattern [16-26] [(n:Person)]
                GraphPathPattern [16-26] [(n:Person)]
                  GraphNodePattern [16-26] [(n:Person)]
                    GraphElementPatternFiller [17-25] [n:Person]
                      Identifier(n) [17-18] [n]
                      GraphLabelFilter [18-25] [:Person]
                        GraphElementLabel [19-25] [Person]
                          Identifier(Person) [19-25] [Person]
            GqlReturn [27-98] [RETURN  ARRAY...one } as arr]
              Select [35-98] [ARRAY  {...one } as arr]
                SelectList [35-98] [ARRAY  {...one } as arr]
                  SelectColumn [35-98] [ARRAY  {...one } as arr]
                    ExpressionSubquery(modifier=ARRAY) [35-91] [ARRAY  {...1 as one }]
                      Query [42-91] [{  GRAPH aml...1 as one }]
                        GqlQuery [42-91] [{  GRAPH aml...1 as one }]
                          GraphTableQuery [42-91] [{  GRAPH aml...1 as one }]
                            PathExpression [51-54] [aml]
                              Identifier(aml) [51-54] [aml]
                            GqlOperatorList [56-89] [MATCH (p:Person...URN 1 as one]
                              GqlOperatorList [56-89] [MATCH (p:Person...URN 1 as one]
                                GqlMatch [56-72] [MATCH (p:Person)]
                                  GraphPattern [62-72] [(p:Person)]
                                    GraphPathPattern [62-72] [(p:Person)]
                                      GraphNodePattern [62-72] [(p:Person)]
                                        GraphElementPatternFiller [63-71] [p:Person]
                                          Identifier(p) [63-64] [p]
                                          GraphLabelFilter [64-71] [:Person]
                                            GraphElementLabel [65-71] [Person]
                                              Identifier(Person) [65-71] [Person]
                                GqlReturn [74-89] [RETURN 1 as one]
                                  Select [81-89] [1 as one]
                                    SelectList [81-89] [1 as one]
                                      SelectColumn [81-89] [1 as one]
                                        IntLiteral(1) [81-82] [1]
                                        Alias [83-89] [as one]
                                          Identifier(one) [86-89] [one]
                    Alias [92-98] [as arr]
                      Identifier(arr) [95-98] [arr]
--
GRAPH aml
MATCH
  (n
  IS Person)
RETURN
  ARRAY {
    GRAPH aml
    MATCH
      (p
      IS Person)
    RETURN
      1 AS one
  } AS arr
--
ALTERNATION GROUP:  EXISTS , , 
--
QueryStatement [0-73] [GRAPH aml...one } as arr]
  Query [0-73] [GRAPH aml...one } as arr]
    GqlQuery [0-73] [GRAPH aml...one } as arr]
      GraphTableQuery [0-73] [GRAPH aml...one } as arr]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-73] [MATCH (n:Person...one } as arr]
          GqlOperatorList [10-73] [MATCH (n:Person...one } as arr]
            GqlMatch [10-26] [MATCH (n:Person)]
              GraphPattern [16-26] [(n:Person)]
                GraphPathPattern [16-26] [(n:Person)]
                  GraphNodePattern [16-26] [(n:Person)]
                    GraphElementPatternFiller [17-25] [n:Person]
                      Identifier(n) [17-18] [n]
                      GraphLabelFilter [18-25] [:Person]
                        GraphElementLabel [19-25] [Person]
                          Identifier(Person) [19-25] [Person]
            GqlReturn [27-73] [RETURN  EXISTS...one } as arr]
              Select [35-73] [EXISTS  {...one } as arr]
                SelectList [35-73] [EXISTS  {...one } as arr]
                  SelectColumn [35-73] [EXISTS  {...one } as arr]
                    ExpressionSubquery(modifier=EXISTS) [35-66] [EXISTS  {...1 as one }]
                      Query [43-66] [{     RETURN 1 as one }]
                        GqlQuery [43-66] [{     RETURN 1 as one }]
                          GraphTableQuery [43-66] [{     RETURN 1 as one }]
                            GqlOperatorList [49-64] [RETURN 1 as one]
                              GqlOperatorList [49-64] [RETURN 1 as one]
                                GqlReturn [49-64] [RETURN 1 as one]
                                  Select [56-64] [1 as one]
                                    SelectList [56-64] [1 as one]
                                      SelectColumn [56-64] [1 as one]
                                        IntLiteral(1) [56-57] [1]
                                        Alias [58-64] [as one]
                                          Identifier(one) [61-64] [one]
                    Alias [67-73] [as arr]
                      Identifier(arr) [70-73] [arr]
--
GRAPH aml
MATCH
  (n
  IS Person)
RETURN
  EXISTS {
    RETURN
      1 AS one
  } AS arr
--
ALTERNATION GROUP:  EXISTS , , MATCH (p:Person) 
--
QueryStatement [0-90] [GRAPH aml...one } as arr]
  Query [0-90] [GRAPH aml...one } as arr]
    GqlQuery [0-90] [GRAPH aml...one } as arr]
      GraphTableQuery [0-90] [GRAPH aml...one } as arr]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-90] [MATCH (n:Person...one } as arr]
          GqlOperatorList [10-90] [MATCH (n:Person...one } as arr]
            GqlMatch [10-26] [MATCH (n:Person)]
              GraphPattern [16-26] [(n:Person)]
                GraphPathPattern [16-26] [(n:Person)]
                  GraphNodePattern [16-26] [(n:Person)]
                    GraphElementPatternFiller [17-25] [n:Person]
                      Identifier(n) [17-18] [n]
                      GraphLabelFilter [18-25] [:Person]
                        GraphElementLabel [19-25] [Person]
                          Identifier(Person) [19-25] [Person]
            GqlReturn [27-90] [RETURN  EXISTS...one } as arr]
              Select [35-90] [EXISTS  {...one } as arr]
                SelectList [35-90] [EXISTS  {...one } as arr]
                  SelectColumn [35-90] [EXISTS  {...one } as arr]
                    ExpressionSubquery(modifier=EXISTS) [35-83] [EXISTS  {...1 as one }]
                      Query [43-83] [{    MATCH...1 as one }]
                        GqlQuery [43-83] [{    MATCH...1 as one }]
                          GraphTableQuery [43-83] [{    MATCH...1 as one }]
                            GqlOperatorList [48-81] [MATCH (p:Person...URN 1 as one]
                              GqlOperatorList [48-81] [MATCH (p:Person...URN 1 as one]
                                GqlMatch [48-64] [MATCH (p:Person)]
                                  GraphPattern [54-64] [(p:Person)]
                                    GraphPathPattern [54-64] [(p:Person)]
                                      GraphNodePattern [54-64] [(p:Person)]
                                        GraphElementPatternFiller [55-63] [p:Person]
                                          Identifier(p) [55-56] [p]
                                          GraphLabelFilter [56-63] [:Person]
                                            GraphElementLabel [57-63] [Person]
                                              Identifier(Person) [57-63] [Person]
                                GqlReturn [66-81] [RETURN 1 as one]
                                  Select [73-81] [1 as one]
                                    SelectList [73-81] [1 as one]
                                      SelectColumn [73-81] [1 as one]
                                        IntLiteral(1) [73-74] [1]
                                        Alias [75-81] [as one]
                                          Identifier(one) [78-81] [one]
                    Alias [84-90] [as arr]
                      Identifier(arr) [87-90] [arr]
--
GRAPH aml
MATCH
  (n
  IS Person)
RETURN
  EXISTS {
    MATCH
      (p
      IS Person)
    RETURN
      1 AS one
  } AS arr
--
ALTERNATION GROUP:  EXISTS , GRAPH aml, 
--
QueryStatement [0-82] [GRAPH aml...one } as arr]
  Query [0-82] [GRAPH aml...one } as arr]
    GqlQuery [0-82] [GRAPH aml...one } as arr]
      GraphTableQuery [0-82] [GRAPH aml...one } as arr]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-82] [MATCH (n:Person...one } as arr]
          GqlOperatorList [10-82] [MATCH (n:Person...one } as arr]
            GqlMatch [10-26] [MATCH (n:Person)]
              GraphPattern [16-26] [(n:Person)]
                GraphPathPattern [16-26] [(n:Person)]
                  GraphNodePattern [16-26] [(n:Person)]
                    GraphElementPatternFiller [17-25] [n:Person]
                      Identifier(n) [17-18] [n]
                      GraphLabelFilter [18-25] [:Person]
                        GraphElementLabel [19-25] [Person]
                          Identifier(Person) [19-25] [Person]
            GqlReturn [27-82] [RETURN  EXISTS...one } as arr]
              Select [35-82] [EXISTS  {...one } as arr]
                SelectList [35-82] [EXISTS  {...one } as arr]
                  SelectColumn [35-82] [EXISTS  {...one } as arr]
                    ExpressionSubquery(modifier=EXISTS) [35-75] [EXISTS  {...1 as one }]
                      Query [43-75] [{  GRAPH aml...1 as one }]
                        GqlQuery [43-75] [{  GRAPH aml...1 as one }]
                          GraphTableQuery [43-75] [{  GRAPH aml...1 as one }]
                            PathExpression [52-55] [aml]
                              Identifier(aml) [52-55] [aml]
                            GqlOperatorList [58-73] [RETURN 1 as one]
                              GqlOperatorList [58-73] [RETURN 1 as one]
                                GqlReturn [58-73] [RETURN 1 as one]
                                  Select [65-73] [1 as one]
                                    SelectList [65-73] [1 as one]
                                      SelectColumn [65-73] [1 as one]
                                        IntLiteral(1) [65-66] [1]
                                        Alias [67-73] [as one]
                                          Identifier(one) [70-73] [one]
                    Alias [76-82] [as arr]
                      Identifier(arr) [79-82] [arr]
--
GRAPH aml
MATCH
  (n
  IS Person)
RETURN
  EXISTS {
    GRAPH aml
    RETURN
      1 AS one
  } AS arr
--
ALTERNATION GROUP:  EXISTS , GRAPH aml, MATCH (p:Person) 
--
QueryStatement [0-99] [GRAPH aml...one } as arr]
  Query [0-99] [GRAPH aml...one } as arr]
    GqlQuery [0-99] [GRAPH aml...one } as arr]
      GraphTableQuery [0-99] [GRAPH aml...one } as arr]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-99] [MATCH (n:Person...one } as arr]
          GqlOperatorList [10-99] [MATCH (n:Person...one } as arr]
            GqlMatch [10-26] [MATCH (n:Person)]
              GraphPattern [16-26] [(n:Person)]
                GraphPathPattern [16-26] [(n:Person)]
                  GraphNodePattern [16-26] [(n:Person)]
                    GraphElementPatternFiller [17-25] [n:Person]
                      Identifier(n) [17-18] [n]
                      GraphLabelFilter [18-25] [:Person]
                        GraphElementLabel [19-25] [Person]
                          Identifier(Person) [19-25] [Person]
            GqlReturn [27-99] [RETURN  EXISTS...one } as arr]
              Select [35-99] [EXISTS  {...one } as arr]
                SelectList [35-99] [EXISTS  {...one } as arr]
                  SelectColumn [35-99] [EXISTS  {...one } as arr]
                    ExpressionSubquery(modifier=EXISTS) [35-92] [EXISTS  {...1 as one }]
                      Query [43-92] [{  GRAPH aml...1 as one }]
                        GqlQuery [43-92] [{  GRAPH aml...1 as one }]
                          GraphTableQuery [43-92] [{  GRAPH aml...1 as one }]
                            PathExpression [52-55] [aml]
                              Identifier(aml) [52-55] [aml]
                            GqlOperatorList [57-90] [MATCH (p:Person...URN 1 as one]
                              GqlOperatorList [57-90] [MATCH (p:Person...URN 1 as one]
                                GqlMatch [57-73] [MATCH (p:Person)]
                                  GraphPattern [63-73] [(p:Person)]
                                    GraphPathPattern [63-73] [(p:Person)]
                                      GraphNodePattern [63-73] [(p:Person)]
                                        GraphElementPatternFiller [64-72] [p:Person]
                                          Identifier(p) [64-65] [p]
                                          GraphLabelFilter [65-72] [:Person]
                                            GraphElementLabel [66-72] [Person]
                                              Identifier(Person) [66-72] [Person]
                                GqlReturn [75-90] [RETURN 1 as one]
                                  Select [82-90] [1 as one]
                                    SelectList [82-90] [1 as one]
                                      SelectColumn [82-90] [1 as one]
                                        IntLiteral(1) [82-83] [1]
                                        Alias [84-90] [as one]
                                          Identifier(one) [87-90] [one]
                    Alias [93-99] [as arr]
                      Identifier(arr) [96-99] [arr]
--
GRAPH aml
MATCH
  (n
  IS Person)
RETURN
  EXISTS {
    GRAPH aml
    MATCH
      (p
      IS Person)
    RETURN
      1 AS one
  } AS arr
--
ALTERNATION GROUP:  VALUE, , 
--
QueryStatement [0-71] [GRAPH aml...one } as arr]
  Query [0-71] [GRAPH aml...one } as arr]
    GqlQuery [0-71] [GRAPH aml...one } as arr]
      GraphTableQuery [0-71] [GRAPH aml...one } as arr]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-71] [MATCH (n:Person...one } as arr]
          GqlOperatorList [10-71] [MATCH (n:Person...one } as arr]
            GqlMatch [10-26] [MATCH (n:Person)]
              GraphPattern [16-26] [(n:Person)]
                GraphPathPattern [16-26] [(n:Person)]
                  GraphNodePattern [16-26] [(n:Person)]
                    GraphElementPatternFiller [17-25] [n:Person]
                      Identifier(n) [17-18] [n]
                      GraphLabelFilter [18-25] [:Person]
                        GraphElementLabel [19-25] [Person]
                          Identifier(Person) [19-25] [Person]
            GqlReturn [27-71] [RETURN  VALUE...one } as arr]
              Select [35-71] [VALUE {...one } as arr]
                SelectList [35-71] [VALUE {...one } as arr]
                  SelectColumn [35-71] [VALUE {...one } as arr]
                    ExpressionSubquery(modifier=VALUE) [35-64] [VALUE {     RETURN 1 as one }]
                      Query [41-64] [{     RETURN 1 as one }]
                        GqlQuery [41-64] [{     RETURN 1 as one }]
                          GraphTableQuery [41-64] [{     RETURN 1 as one }]
                            GqlOperatorList [47-62] [RETURN 1 as one]
                              GqlOperatorList [47-62] [RETURN 1 as one]
                                GqlReturn [47-62] [RETURN 1 as one]
                                  Select [54-62] [1 as one]
                                    SelectList [54-62] [1 as one]
                                      SelectColumn [54-62] [1 as one]
                                        IntLiteral(1) [54-55] [1]
                                        Alias [56-62] [as one]
                                          Identifier(one) [59-62] [one]
                    Alias [65-71] [as arr]
                      Identifier(arr) [68-71] [arr]
--
GRAPH aml
MATCH
  (n
  IS Person)
RETURN
  VALUE {
    RETURN
      1 AS one
  } AS arr
--
ALTERNATION GROUP:  VALUE, , MATCH (p:Person) 
--
QueryStatement [0-88] [GRAPH aml...one } as arr]
  Query [0-88] [GRAPH aml...one } as arr]
    GqlQuery [0-88] [GRAPH aml...one } as arr]
      GraphTableQuery [0-88] [GRAPH aml...one } as arr]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-88] [MATCH (n:Person...one } as arr]
          GqlOperatorList [10-88] [MATCH (n:Person...one } as arr]
            GqlMatch [10-26] [MATCH (n:Person)]
              GraphPattern [16-26] [(n:Person)]
                GraphPathPattern [16-26] [(n:Person)]
                  GraphNodePattern [16-26] [(n:Person)]
                    GraphElementPatternFiller [17-25] [n:Person]
                      Identifier(n) [17-18] [n]
                      GraphLabelFilter [18-25] [:Person]
                        GraphElementLabel [19-25] [Person]
                          Identifier(Person) [19-25] [Person]
            GqlReturn [27-88] [RETURN  VALUE...one } as arr]
              Select [35-88] [VALUE {...one } as arr]
                SelectList [35-88] [VALUE {...one } as arr]
                  SelectColumn [35-88] [VALUE {...one } as arr]
                    ExpressionSubquery(modifier=VALUE) [35-81] [VALUE {...1 as one }]
                      Query [41-81] [{    MATCH...1 as one }]
                        GqlQuery [41-81] [{    MATCH...1 as one }]
                          GraphTableQuery [41-81] [{    MATCH...1 as one }]
                            GqlOperatorList [46-79] [MATCH (p:Person...URN 1 as one]
                              GqlOperatorList [46-79] [MATCH (p:Person...URN 1 as one]
                                GqlMatch [46-62] [MATCH (p:Person)]
                                  GraphPattern [52-62] [(p:Person)]
                                    GraphPathPattern [52-62] [(p:Person)]
                                      GraphNodePattern [52-62] [(p:Person)]
                                        GraphElementPatternFiller [53-61] [p:Person]
                                          Identifier(p) [53-54] [p]
                                          GraphLabelFilter [54-61] [:Person]
                                            GraphElementLabel [55-61] [Person]
                                              Identifier(Person) [55-61] [Person]
                                GqlReturn [64-79] [RETURN 1 as one]
                                  Select [71-79] [1 as one]
                                    SelectList [71-79] [1 as one]
                                      SelectColumn [71-79] [1 as one]
                                        IntLiteral(1) [71-72] [1]
                                        Alias [73-79] [as one]
                                          Identifier(one) [76-79] [one]
                    Alias [82-88] [as arr]
                      Identifier(arr) [85-88] [arr]
--
GRAPH aml
MATCH
  (n
  IS Person)
RETURN
  VALUE {
    MATCH
      (p
      IS Person)
    RETURN
      1 AS one
  } AS arr
--
ALTERNATION GROUP:  VALUE, GRAPH aml, 
--
QueryStatement [0-80] [GRAPH aml...one } as arr]
  Query [0-80] [GRAPH aml...one } as arr]
    GqlQuery [0-80] [GRAPH aml...one } as arr]
      GraphTableQuery [0-80] [GRAPH aml...one } as arr]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-80] [MATCH (n:Person...one } as arr]
          GqlOperatorList [10-80] [MATCH (n:Person...one } as arr]
            GqlMatch [10-26] [MATCH (n:Person)]
              GraphPattern [16-26] [(n:Person)]
                GraphPathPattern [16-26] [(n:Person)]
                  GraphNodePattern [16-26] [(n:Person)]
                    GraphElementPatternFiller [17-25] [n:Person]
                      Identifier(n) [17-18] [n]
                      GraphLabelFilter [18-25] [:Person]
                        GraphElementLabel [19-25] [Person]
                          Identifier(Person) [19-25] [Person]
            GqlReturn [27-80] [RETURN  VALUE...one } as arr]
              Select [35-80] [VALUE {  GRAPH...one } as arr]
                SelectList [35-80] [VALUE {  GRAPH...one } as arr]
                  SelectColumn [35-80] [VALUE {  GRAPH...one } as arr]
                    ExpressionSubquery(modifier=VALUE) [35-73] [VALUE {  GRAPH...1 as one }]
                      Query [41-73] [{  GRAPH aml...1 as one }]
                        GqlQuery [41-73] [{  GRAPH aml...1 as one }]
                          GraphTableQuery [41-73] [{  GRAPH aml...1 as one }]
                            PathExpression [50-53] [aml]
                              Identifier(aml) [50-53] [aml]
                            GqlOperatorList [56-71] [RETURN 1 as one]
                              GqlOperatorList [56-71] [RETURN 1 as one]
                                GqlReturn [56-71] [RETURN 1 as one]
                                  Select [63-71] [1 as one]
                                    SelectList [63-71] [1 as one]
                                      SelectColumn [63-71] [1 as one]
                                        IntLiteral(1) [63-64] [1]
                                        Alias [65-71] [as one]
                                          Identifier(one) [68-71] [one]
                    Alias [74-80] [as arr]
                      Identifier(arr) [77-80] [arr]
--
GRAPH aml
MATCH
  (n
  IS Person)
RETURN
  VALUE {
    GRAPH aml
    RETURN
      1 AS one
  } AS arr
--
ALTERNATION GROUP:  VALUE, GRAPH aml, MATCH (p:Person) 
--
QueryStatement [0-97] [GRAPH aml...one } as arr]
  Query [0-97] [GRAPH aml...one } as arr]
    GqlQuery [0-97] [GRAPH aml...one } as arr]
      GraphTableQuery [0-97] [GRAPH aml...one } as arr]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-97] [MATCH (n:Person...one } as arr]
          GqlOperatorList [10-97] [MATCH (n:Person...one } as arr]
            GqlMatch [10-26] [MATCH (n:Person)]
              GraphPattern [16-26] [(n:Person)]
                GraphPathPattern [16-26] [(n:Person)]
                  GraphNodePattern [16-26] [(n:Person)]
                    GraphElementPatternFiller [17-25] [n:Person]
                      Identifier(n) [17-18] [n]
                      GraphLabelFilter [18-25] [:Person]
                        GraphElementLabel [19-25] [Person]
                          Identifier(Person) [19-25] [Person]
            GqlReturn [27-97] [RETURN  VALUE...one } as arr]
              Select [35-97] [VALUE {  GRAPH...one } as arr]
                SelectList [35-97] [VALUE {  GRAPH...one } as arr]
                  SelectColumn [35-97] [VALUE {  GRAPH...one } as arr]
                    ExpressionSubquery(modifier=VALUE) [35-90] [VALUE {  GRAPH...1 as one }]
                      Query [41-90] [{  GRAPH aml...1 as one }]
                        GqlQuery [41-90] [{  GRAPH aml...1 as one }]
                          GraphTableQuery [41-90] [{  GRAPH aml...1 as one }]
                            PathExpression [50-53] [aml]
                              Identifier(aml) [50-53] [aml]
                            GqlOperatorList [55-88] [MATCH (p:Person...URN 1 as one]
                              GqlOperatorList [55-88] [MATCH (p:Person...URN 1 as one]
                                GqlMatch [55-71] [MATCH (p:Person)]
                                  GraphPattern [61-71] [(p:Person)]
                                    GraphPathPattern [61-71] [(p:Person)]
                                      GraphNodePattern [61-71] [(p:Person)]
                                        GraphElementPatternFiller [62-70] [p:Person]
                                          Identifier(p) [62-63] [p]
                                          GraphLabelFilter [63-70] [:Person]
                                            GraphElementLabel [64-70] [Person]
                                              Identifier(Person) [64-70] [Person]
                                GqlReturn [73-88] [RETURN 1 as one]
                                  Select [80-88] [1 as one]
                                    SelectList [80-88] [1 as one]
                                      SelectColumn [80-88] [1 as one]
                                        IntLiteral(1) [80-81] [1]
                                        Alias [82-88] [as one]
                                          Identifier(one) [85-88] [one]
                    Alias [91-97] [as arr]
                      Identifier(arr) [94-97] [arr]
--
GRAPH aml
MATCH
  (n
  IS Person)
RETURN
  VALUE {
    GRAPH aml
    MATCH
      (p
      IS Person)
    RETURN
      1 AS one
  } AS arr
==

# LIKE ANY|SOME|ALL with graph subquery
GRAPH aml
MATCH (n:Person)
WHERE n.name LIKE {{ANY|SOME|ALL}} ( VALUE { MATCH (p:Person) RETURN 1 as one} )
RETURN true AS val
--
ALTERNATION GROUP: ANY
--
QueryStatement [0-113] [GRAPH aml...true AS val]
  Query [0-113] [GRAPH aml...true AS val]
    GqlQuery [0-113] [GRAPH aml...true AS val]
      GraphTableQuery [0-113] [GRAPH aml...true AS val]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-113] [MATCH (n:Person...true AS val]
          GqlOperatorList [10-113] [MATCH (n:Person...true AS val]
            GqlMatch [10-94] [MATCH (n:Person...as one} )]
              GraphPattern [16-94] [(n:Person)...as one} )]
                GraphPathPattern [16-26] [(n:Person)]
                  GraphNodePattern [16-26] [(n:Person)]
                    GraphElementPatternFiller [17-25] [n:Person]
                      Identifier(n) [17-18] [n]
                      GraphLabelFilter [18-25] [:Person]
                        GraphElementLabel [19-25] [Person]
                          Identifier(Person) [19-25] [Person]
                WhereClause [27-94] [WHERE n.name...as one} )]
                  LikeExpression(LIKE) [33-94] [n.name LIKE...as one} )]
                    PathExpression [33-39] [n.name]
                      Identifier(n) [33-34] [n]
                      Identifier(name) [35-39] [name]
                    Location [40-44] [LIKE]
                    AnySomeAllOp(ANY) [45-48] [ANY]
                    InList [51-92] [VALUE { MATCH...1 as one}]
                      ExpressionSubquery(modifier=VALUE) [51-92] [VALUE { MATCH...1 as one}]
                        Query [57-92] [{ MATCH (p...1 as one}]
                          GqlQuery [57-92] [{ MATCH (p...1 as one}]
                            GraphTableQuery [57-92] [{ MATCH (p...1 as one}]
                              GqlOperatorList [59-91] [MATCH (p:Person...URN 1 as one]
                                GqlOperatorList [59-91] [MATCH (p:Person...URN 1 as one]
                                  GqlMatch [59-75] [MATCH (p:Person)]
                                    GraphPattern [65-75] [(p:Person)]
                                      GraphPathPattern [65-75] [(p:Person)]
                                        GraphNodePattern [65-75] [(p:Person)]
                                          GraphElementPatternFiller [66-74] [p:Person]
                                            Identifier(p) [66-67] [p]
                                            GraphLabelFilter [67-74] [:Person]
                                              GraphElementLabel [68-74] [Person]
                                                Identifier(Person) [68-74] [Person]
                                  GqlReturn [76-91] [RETURN 1 as one]
                                    Select [83-91] [1 as one]
                                      SelectList [83-91] [1 as one]
                                        SelectColumn [83-91] [1 as one]
                                          IntLiteral(1) [83-84] [1]
                                          Alias [85-91] [as one]
                                            Identifier(one) [88-91] [one]
            GqlReturn [95-113] [RETURN true AS val]
              Select [102-113] [true AS val]
                SelectList [102-113] [true AS val]
                  SelectColumn [102-113] [true AS val]
                    BooleanLiteral(true) [102-106] [true]
                    Alias [107-113] [AS val]
                      Identifier(val) [110-113] [val]
--
GRAPH aml
MATCH
  (n
  IS Person)
  WHERE
    n.name LIKE ANY(VALUE {
        MATCH
          (p
          IS Person)
        RETURN
          1 AS one
      })
RETURN
  true AS val
--
ALTERNATION GROUP: SOME
--
QueryStatement [0-114] [GRAPH aml...true AS val]
  Query [0-114] [GRAPH aml...true AS val]
    GqlQuery [0-114] [GRAPH aml...true AS val]
      GraphTableQuery [0-114] [GRAPH aml...true AS val]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-114] [MATCH (n:Person...true AS val]
          GqlOperatorList [10-114] [MATCH (n:Person...true AS val]
            GqlMatch [10-95] [MATCH (n:Person...as one} )]
              GraphPattern [16-95] [(n:Person)...as one} )]
                GraphPathPattern [16-26] [(n:Person)]
                  GraphNodePattern [16-26] [(n:Person)]
                    GraphElementPatternFiller [17-25] [n:Person]
                      Identifier(n) [17-18] [n]
                      GraphLabelFilter [18-25] [:Person]
                        GraphElementLabel [19-25] [Person]
                          Identifier(Person) [19-25] [Person]
                WhereClause [27-95] [WHERE n.name...as one} )]
                  LikeExpression(LIKE) [33-95] [n.name LIKE...as one} )]
                    PathExpression [33-39] [n.name]
                      Identifier(n) [33-34] [n]
                      Identifier(name) [35-39] [name]
                    Location [40-44] [LIKE]
                    AnySomeAllOp(SOME) [45-49] [SOME]
                    InList [52-93] [VALUE { MATCH...1 as one}]
                      ExpressionSubquery(modifier=VALUE) [52-93] [VALUE { MATCH...1 as one}]
                        Query [58-93] [{ MATCH (p...1 as one}]
                          GqlQuery [58-93] [{ MATCH (p...1 as one}]
                            GraphTableQuery [58-93] [{ MATCH (p...1 as one}]
                              GqlOperatorList [60-92] [MATCH (p:Person...URN 1 as one]
                                GqlOperatorList [60-92] [MATCH (p:Person...URN 1 as one]
                                  GqlMatch [60-76] [MATCH (p:Person)]
                                    GraphPattern [66-76] [(p:Person)]
                                      GraphPathPattern [66-76] [(p:Person)]
                                        GraphNodePattern [66-76] [(p:Person)]
                                          GraphElementPatternFiller [67-75] [p:Person]
                                            Identifier(p) [67-68] [p]
                                            GraphLabelFilter [68-75] [:Person]
                                              GraphElementLabel [69-75] [Person]
                                                Identifier(Person) [69-75] [Person]
                                  GqlReturn [77-92] [RETURN 1 as one]
                                    Select [84-92] [1 as one]
                                      SelectList [84-92] [1 as one]
                                        SelectColumn [84-92] [1 as one]
                                          IntLiteral(1) [84-85] [1]
                                          Alias [86-92] [as one]
                                            Identifier(one) [89-92] [one]
            GqlReturn [96-114] [RETURN true AS val]
              Select [103-114] [true AS val]
                SelectList [103-114] [true AS val]
                  SelectColumn [103-114] [true AS val]
                    BooleanLiteral(true) [103-107] [true]
                    Alias [108-114] [AS val]
                      Identifier(val) [111-114] [val]
--
GRAPH aml
MATCH
  (n
  IS Person)
  WHERE
    n.name LIKE SOME(VALUE {
        MATCH
          (p
          IS Person)
        RETURN
          1 AS one
      })
RETURN
  true AS val
--
ALTERNATION GROUP: ALL
--
QueryStatement [0-113] [GRAPH aml...true AS val]
  Query [0-113] [GRAPH aml...true AS val]
    GqlQuery [0-113] [GRAPH aml...true AS val]
      GraphTableQuery [0-113] [GRAPH aml...true AS val]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-113] [MATCH (n:Person...true AS val]
          GqlOperatorList [10-113] [MATCH (n:Person...true AS val]
            GqlMatch [10-94] [MATCH (n:Person...as one} )]
              GraphPattern [16-94] [(n:Person)...as one} )]
                GraphPathPattern [16-26] [(n:Person)]
                  GraphNodePattern [16-26] [(n:Person)]
                    GraphElementPatternFiller [17-25] [n:Person]
                      Identifier(n) [17-18] [n]
                      GraphLabelFilter [18-25] [:Person]
                        GraphElementLabel [19-25] [Person]
                          Identifier(Person) [19-25] [Person]
                WhereClause [27-94] [WHERE n.name...as one} )]
                  LikeExpression(LIKE) [33-94] [n.name LIKE...as one} )]
                    PathExpression [33-39] [n.name]
                      Identifier(n) [33-34] [n]
                      Identifier(name) [35-39] [name]
                    Location [40-44] [LIKE]
                    AnySomeAllOp(ALL) [45-48] [ALL]
                    InList [51-92] [VALUE { MATCH...1 as one}]
                      ExpressionSubquery(modifier=VALUE) [51-92] [VALUE { MATCH...1 as one}]
                        Query [57-92] [{ MATCH (p...1 as one}]
                          GqlQuery [57-92] [{ MATCH (p...1 as one}]
                            GraphTableQuery [57-92] [{ MATCH (p...1 as one}]
                              GqlOperatorList [59-91] [MATCH (p:Person...URN 1 as one]
                                GqlOperatorList [59-91] [MATCH (p:Person...URN 1 as one]
                                  GqlMatch [59-75] [MATCH (p:Person)]
                                    GraphPattern [65-75] [(p:Person)]
                                      GraphPathPattern [65-75] [(p:Person)]
                                        GraphNodePattern [65-75] [(p:Person)]
                                          GraphElementPatternFiller [66-74] [p:Person]
                                            Identifier(p) [66-67] [p]
                                            GraphLabelFilter [67-74] [:Person]
                                              GraphElementLabel [68-74] [Person]
                                                Identifier(Person) [68-74] [Person]
                                  GqlReturn [76-91] [RETURN 1 as one]
                                    Select [83-91] [1 as one]
                                      SelectList [83-91] [1 as one]
                                        SelectColumn [83-91] [1 as one]
                                          IntLiteral(1) [83-84] [1]
                                          Alias [85-91] [as one]
                                            Identifier(one) [88-91] [one]
            GqlReturn [95-113] [RETURN true AS val]
              Select [102-113] [true AS val]
                SelectList [102-113] [true AS val]
                  SelectColumn [102-113] [true AS val]
                    BooleanLiteral(true) [102-106] [true]
                    Alias [107-113] [AS val]
                      Identifier(val) [110-113] [val]
--
GRAPH aml
MATCH
  (n
  IS Person)
  WHERE
    n.name LIKE ALL(VALUE {
        MATCH
          (p
          IS Person)
        RETURN
          1 AS one
      })
RETURN
  true AS val
==

# LIKE ANY|SOME|ALL do not support braced graph subquery directly
GRAPH aml
MATCH (n:Person)
WHERE n.name LIKE {{ANY|SOME|ALL}} { MATCH (p:Person) RETURN "name" as name }
RETURN true AS val
--
ALTERNATION GROUP: ANY
--
ERROR: Syntax error: Unexpected "{" [at 3:23]
WHERE n.name LIKE ANY { MATCH (p:Person) RETURN "name" as name }
                      ^
--
ALTERNATION GROUP: SOME
--
ERROR: Syntax error: Unexpected "{" [at 3:24]
WHERE n.name LIKE SOME { MATCH (p:Person) RETURN "name" as name }
                       ^
--
ALTERNATION GROUP: ALL
--
ERROR: Syntax error: Unexpected "{" [at 3:23]
WHERE n.name LIKE ALL { MATCH (p:Person) RETURN "name" as name }
                      ^
==

# testing IN subquery
GRAPH aml
MATCH (n1:Person)
WHERE n1.name IN { {{|GRAPH fin}} MATCH (n2:Person) RETURN n2.name }
RETURN n1.id
--
ALTERNATION GROUP: <empty>
--
QueryStatement [0-95] [GRAPH aml...RETURN n1.id]
  Query [0-95] [GRAPH aml...RETURN n1.id]
    GqlQuery [0-95] [GRAPH aml...RETURN n1.id]
      GraphTableQuery [0-95] [GRAPH aml...RETURN n1.id]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-95] [MATCH (n1:...RETURN n1.id]
          GqlOperatorList [10-95] [MATCH (n1:...RETURN n1.id]
            GqlMatch [10-82] [MATCH (n1:...n2.name }]
              GraphPattern [16-82] [(n1:Person...n2.name }]
                GraphPathPattern [16-27] [(n1:Person)]
                  GraphNodePattern [16-27] [(n1:Person)]
                    GraphElementPatternFiller [17-26] [n1:Person]
                      Identifier(n1) [17-19] [n1]
                      GraphLabelFilter [19-26] [:Person]
                        GraphElementLabel [20-26] [Person]
                          Identifier(Person) [20-26] [Person]
                WhereClause [28-82] [WHERE n1.name...n2.name }]
                  InExpression(IN) [34-82] [n1.name IN...n2.name }]
                    PathExpression [34-41] [n1.name]
                      Identifier(n1) [34-36] [n1]
                      Identifier(name) [37-41] [name]
                    Location [42-44] [IN]
                    Query [45-82] [{  MATCH (...n2.name }]
                      GqlQuery [45-82] [{  MATCH (...n2.name }]
                        GraphTableQuery [45-82] [{  MATCH (...n2.name }]
                          GqlOperatorList [48-80] [MATCH (n2:...RETURN n2.name]
                            GqlOperatorList [48-80] [MATCH (n2:...RETURN n2.name]
                              GqlMatch [48-65] [MATCH (n2:Person)]
                                GraphPattern [54-65] [(n2:Person)]
                                  GraphPathPattern [54-65] [(n2:Person)]
                                    GraphNodePattern [54-65] [(n2:Person)]
                                      GraphElementPatternFiller [55-64] [n2:Person]
                                        Identifier(n2) [55-57] [n2]
                                        GraphLabelFilter [57-64] [:Person]
                                          GraphElementLabel [58-64] [Person]
                                            Identifier(Person) [58-64] [Person]
                              GqlReturn [66-80] [RETURN n2.name]
                                Select [73-80] [n2.name]
                                  SelectList [73-80] [n2.name]
                                    SelectColumn [73-80] [n2.name]
                                      PathExpression [73-80] [n2.name]
                                        Identifier(n2) [73-75] [n2]
                                        Identifier(name) [76-80] [name]
            GqlReturn [83-95] [RETURN n1.id]
              Select [90-95] [n1.id]
                SelectList [90-95] [n1.id]
                  SelectColumn [90-95] [n1.id]
                    PathExpression [90-95] [n1.id]
                      Identifier(n1) [90-92] [n1]
                      Identifier(id) [93-95] [id]
--
GRAPH aml
MATCH
  (n1
  IS Person)
  WHERE
    n1.name IN {
      MATCH
        (n2
        IS Person)
      RETURN
        n2.name
    }
RETURN
  n1.id
--
ALTERNATION GROUP: GRAPH fin
--
QueryStatement [0-104] [GRAPH aml...RETURN n1.id]
  Query [0-104] [GRAPH aml...RETURN n1.id]
    GqlQuery [0-104] [GRAPH aml...RETURN n1.id]
      GraphTableQuery [0-104] [GRAPH aml...RETURN n1.id]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-104] [MATCH (n1:...RETURN n1.id]
          GqlOperatorList [10-104] [MATCH (n1:...RETURN n1.id]
            GqlMatch [10-91] [MATCH (n1:...n2.name }]
              GraphPattern [16-91] [(n1:Person...n2.name }]
                GraphPathPattern [16-27] [(n1:Person)]
                  GraphNodePattern [16-27] [(n1:Person)]
                    GraphElementPatternFiller [17-26] [n1:Person]
                      Identifier(n1) [17-19] [n1]
                      GraphLabelFilter [19-26] [:Person]
                        GraphElementLabel [20-26] [Person]
                          Identifier(Person) [20-26] [Person]
                WhereClause [28-91] [WHERE n1.name...n2.name }]
                  InExpression(IN) [34-91] [n1.name IN...n2.name }]
                    PathExpression [34-41] [n1.name]
                      Identifier(n1) [34-36] [n1]
                      Identifier(name) [37-41] [name]
                    Location [42-44] [IN]
                    Query [45-91] [{ GRAPH fin...n2.name }]
                      GqlQuery [45-91] [{ GRAPH fin...n2.name }]
                        GraphTableQuery [45-91] [{ GRAPH fin...n2.name }]
                          PathExpression [53-56] [fin]
                            Identifier(fin) [53-56] [fin]
                          GqlOperatorList [57-89] [MATCH (n2:...RETURN n2.name]
                            GqlOperatorList [57-89] [MATCH (n2:...RETURN n2.name]
                              GqlMatch [57-74] [MATCH (n2:Person)]
                                GraphPattern [63-74] [(n2:Person)]
                                  GraphPathPattern [63-74] [(n2:Person)]
                                    GraphNodePattern [63-74] [(n2:Person)]
                                      GraphElementPatternFiller [64-73] [n2:Person]
                                        Identifier(n2) [64-66] [n2]
                                        GraphLabelFilter [66-73] [:Person]
                                          GraphElementLabel [67-73] [Person]
                                            Identifier(Person) [67-73] [Person]
                              GqlReturn [75-89] [RETURN n2.name]
                                Select [82-89] [n2.name]
                                  SelectList [82-89] [n2.name]
                                    SelectColumn [82-89] [n2.name]
                                      PathExpression [82-89] [n2.name]
                                        Identifier(n2) [82-84] [n2]
                                        Identifier(name) [85-89] [name]
            GqlReturn [92-104] [RETURN n1.id]
              Select [99-104] [n1.id]
                SelectList [99-104] [n1.id]
                  SelectColumn [99-104] [n1.id]
                    PathExpression [99-104] [n1.id]
                      Identifier(n1) [99-101] [n1]
                      Identifier(id) [102-104] [id]
--
GRAPH aml
MATCH
  (n1
  IS Person)
  WHERE
    n1.name IN {
      GRAPH fin
      MATCH
        (n2
        IS Person)
      RETURN
        n2.name
    }
RETURN
  n1.id
==

# EXISTS {graph pattern} subquery
GRAPH aml
MATCH (n1:Person)
WHERE EXISTS {{ |@{hint=1} }}{ {{|GRAPH fin}} (n2:Person) }
RETURN n1.id
--
ALTERNATION GROUP:  ,
--
QueryStatement [0-71] [GRAPH aml...RETURN n1.id]
  Query [0-71] [GRAPH aml...RETURN n1.id]
    GqlQuery [0-71] [GRAPH aml...RETURN n1.id]
      GraphTableQuery [0-71] [GRAPH aml...RETURN n1.id]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-71] [MATCH (n1:...RETURN n1.id]
          GqlOperatorList [10-71] [MATCH (n1:...RETURN n1.id]
            GqlMatch [10-58] [MATCH (n1:...:Person) }]
              GraphPattern [16-58] [(n1:Person...:Person) }]
                GraphPathPattern [16-27] [(n1:Person)]
                  GraphNodePattern [16-27] [(n1:Person)]
                    GraphElementPatternFiller [17-26] [n1:Person]
                      Identifier(n1) [17-19] [n1]
                      GraphLabelFilter [19-26] [:Person]
                        GraphElementLabel [20-26] [Person]
                          Identifier(Person) [20-26] [Person]
                WhereClause [28-58] [WHERE EXISTS  {  (n2:Person) }]
                  ExpressionSubquery(modifier=EXISTS) [34-58] [EXISTS  {  (n2:Person) }]
                    Query [34-58] [EXISTS  {  (n2:Person) }]
                      GqlGraphPatternQuery [34-58] [EXISTS  {  (n2:Person) }]
                        GraphPattern [45-56] [(n2:Person)]
                          GraphPathPattern [45-56] [(n2:Person)]
                            GraphNodePattern [45-56] [(n2:Person)]
                              GraphElementPatternFiller [46-55] [n2:Person]
                                Identifier(n2) [46-48] [n2]
                                GraphLabelFilter [48-55] [:Person]
                                  GraphElementLabel [49-55] [Person]
                                    Identifier(Person) [49-55] [Person]
            GqlReturn [59-71] [RETURN n1.id]
              Select [66-71] [n1.id]
                SelectList [66-71] [n1.id]
                  SelectColumn [66-71] [n1.id]
                    PathExpression [66-71] [n1.id]
                      Identifier(n1) [66-68] [n1]
                      Identifier(id) [69-71] [id]
--
GRAPH aml
MATCH
  (n1
  IS Person)
  WHERE
    EXISTS {
      (n2
      IS Person)
    }
RETURN
  n1.id
--
ALTERNATION GROUP:  ,GRAPH fin
--
QueryStatement [0-80] [GRAPH aml...RETURN n1.id]
  Query [0-80] [GRAPH aml...RETURN n1.id]
    GqlQuery [0-80] [GRAPH aml...RETURN n1.id]
      GraphTableQuery [0-80] [GRAPH aml...RETURN n1.id]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-80] [MATCH (n1:...RETURN n1.id]
          GqlOperatorList [10-80] [MATCH (n1:...RETURN n1.id]
            GqlMatch [10-67] [MATCH (n1:...:Person) }]
              GraphPattern [16-67] [(n1:Person...:Person) }]
                GraphPathPattern [16-27] [(n1:Person)]
                  GraphNodePattern [16-27] [(n1:Person)]
                    GraphElementPatternFiller [17-26] [n1:Person]
                      Identifier(n1) [17-19] [n1]
                      GraphLabelFilter [19-26] [:Person]
                        GraphElementLabel [20-26] [Person]
                          Identifier(Person) [20-26] [Person]
                WhereClause [28-67] [WHERE EXISTS...:Person) }]
                  ExpressionSubquery(modifier=EXISTS) [34-67] [EXISTS  {...:Person) }]
                    Query [34-67] [EXISTS  {...:Person) }]
                      GqlGraphPatternQuery [34-67] [EXISTS  {...:Person) }]
                        PathExpression [50-53] [fin]
                          Identifier(fin) [50-53] [fin]
                        GraphPattern [54-65] [(n2:Person)]
                          GraphPathPattern [54-65] [(n2:Person)]
                            GraphNodePattern [54-65] [(n2:Person)]
                              GraphElementPatternFiller [55-64] [n2:Person]
                                Identifier(n2) [55-57] [n2]
                                GraphLabelFilter [57-64] [:Person]
                                  GraphElementLabel [58-64] [Person]
                                    Identifier(Person) [58-64] [Person]
            GqlReturn [68-80] [RETURN n1.id]
              Select [75-80] [n1.id]
                SelectList [75-80] [n1.id]
                  SelectColumn [75-80] [n1.id]
                    PathExpression [75-80] [n1.id]
                      Identifier(n1) [75-77] [n1]
                      Identifier(id) [78-80] [id]
--
GRAPH aml
MATCH
  (n1
  IS Person)
  WHERE
    EXISTS {
      GRAPH fin
      (n2
      IS Person)
    }
RETURN
  n1.id
--
ALTERNATION GROUP: @{hint=1} ,
--
QueryStatement [0-80] [GRAPH aml...RETURN n1.id]
  Query [0-80] [GRAPH aml...RETURN n1.id]
    GqlQuery [0-80] [GRAPH aml...RETURN n1.id]
      GraphTableQuery [0-80] [GRAPH aml...RETURN n1.id]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-80] [MATCH (n1:...RETURN n1.id]
          GqlOperatorList [10-80] [MATCH (n1:...RETURN n1.id]
            GqlMatch [10-67] [MATCH (n1:...:Person) }]
              GraphPattern [16-67] [(n1:Person...:Person) }]
                GraphPathPattern [16-27] [(n1:Person)]
                  GraphNodePattern [16-27] [(n1:Person)]
                    GraphElementPatternFiller [17-26] [n1:Person]
                      Identifier(n1) [17-19] [n1]
                      GraphLabelFilter [19-26] [:Person]
                        GraphElementLabel [20-26] [Person]
                          Identifier(Person) [20-26] [Person]
                WhereClause [28-67] [WHERE EXISTS...:Person) }]
                  ExpressionSubquery(modifier=EXISTS) [34-67] [EXISTS @{hint...:Person) }]
                    Hint [41-50] [@{hint=1}]
                      HintEntry [43-49] [hint=1]
                        Identifier(hint) [43-47] [hint]
                        IntLiteral(1) [48-49] [1]
                    Query [34-67] [EXISTS @{hint...:Person) }]
                      GqlGraphPatternQuery [34-67] [EXISTS @{hint...:Person) }]
                        GraphPattern [54-65] [(n2:Person)]
                          GraphPathPattern [54-65] [(n2:Person)]
                            GraphNodePattern [54-65] [(n2:Person)]
                              GraphElementPatternFiller [55-64] [n2:Person]
                                Identifier(n2) [55-57] [n2]
                                GraphLabelFilter [57-64] [:Person]
                                  GraphElementLabel [58-64] [Person]
                                    Identifier(Person) [58-64] [Person]
            GqlReturn [68-80] [RETURN n1.id]
              Select [75-80] [n1.id]
                SelectList [75-80] [n1.id]
                  SelectColumn [75-80] [n1.id]
                    PathExpression [75-80] [n1.id]
                      Identifier(n1) [75-77] [n1]
                      Identifier(id) [78-80] [id]
--
GRAPH aml
MATCH
  (n1
  IS Person)
  WHERE
    EXISTS @{ hint = 1 } {
      (n2
      IS Person)
    }
RETURN
  n1.id
--
ALTERNATION GROUP: @{hint=1} ,GRAPH fin
--
QueryStatement [0-89] [GRAPH aml...RETURN n1.id]
  Query [0-89] [GRAPH aml...RETURN n1.id]
    GqlQuery [0-89] [GRAPH aml...RETURN n1.id]
      GraphTableQuery [0-89] [GRAPH aml...RETURN n1.id]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [10-89] [MATCH (n1:...RETURN n1.id]
          GqlOperatorList [10-89] [MATCH (n1:...RETURN n1.id]
            GqlMatch [10-76] [MATCH (n1:...:Person) }]
              GraphPattern [16-76] [(n1:Person...:Person) }]
                GraphPathPattern [16-27] [(n1:Person)]
                  GraphNodePattern [16-27] [(n1:Person)]
                    GraphElementPatternFiller [17-26] [n1:Person]
                      Identifier(n1) [17-19] [n1]
                      GraphLabelFilter [19-26] [:Person]
                        GraphElementLabel [20-26] [Person]
                          Identifier(Person) [20-26] [Person]
                WhereClause [28-76] [WHERE EXISTS...:Person) }]
                  ExpressionSubquery(modifier=EXISTS) [34-76] [EXISTS @{hint...:Person) }]
                    Hint [41-50] [@{hint=1}]
                      HintEntry [43-49] [hint=1]
                        Identifier(hint) [43-47] [hint]
                        IntLiteral(1) [48-49] [1]
                    Query [34-76] [EXISTS @{hint...:Person) }]
                      GqlGraphPatternQuery [34-76] [EXISTS @{hint...:Person) }]
                        PathExpression [59-62] [fin]
                          Identifier(fin) [59-62] [fin]
                        GraphPattern [63-74] [(n2:Person)]
                          GraphPathPattern [63-74] [(n2:Person)]
                            GraphNodePattern [63-74] [(n2:Person)]
                              GraphElementPatternFiller [64-73] [n2:Person]
                                Identifier(n2) [64-66] [n2]
                                GraphLabelFilter [66-73] [:Person]
                                  GraphElementLabel [67-73] [Person]
                                    Identifier(Person) [67-73] [Person]
            GqlReturn [77-89] [RETURN n1.id]
              Select [84-89] [n1.id]
                SelectList [84-89] [n1.id]
                  SelectColumn [84-89] [n1.id]
                    PathExpression [84-89] [n1.id]
                      Identifier(n1) [84-86] [n1]
                      Identifier(id) [87-89] [id]
--
GRAPH aml
MATCH
  (n1
  IS Person)
  WHERE
    EXISTS @{ hint = 1 } {
      GRAPH fin
      (n2
      IS Person)
    }
RETURN
  n1.id
==

# EXISTS {linear ops} subquery
GRAPH aml

RETURN EXISTS {{ |@{hint=1} }} {
  {{|GRAPH fin}}
  MATCH (n1:Person)
  OPTIONAL MATCH (n2:Person)
}
--
ALTERNATION GROUP:  ,
--
QueryStatement [0-82] [GRAPH aml...:Person) }]
  Query [0-82] [GRAPH aml...:Person) }]
    GqlQuery [0-82] [GRAPH aml...:Person) }]
      GraphTableQuery [0-82] [GRAPH aml...:Person) }]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [11-82] [RETURN EXISTS...:Person) }]
          GqlOperatorList [11-82] [RETURN EXISTS...:Person) }]
            GqlReturn [11-82] [RETURN EXISTS...:Person) }]
              Select [18-82] [EXISTS   {...:Person) }]
                SelectList [18-82] [EXISTS   {...:Person) }]
                  SelectColumn [18-82] [EXISTS   {...:Person) }]
                    ExpressionSubquery(modifier=EXISTS) [18-82] [EXISTS   {...:Person) }]
                      Query [18-82] [EXISTS   {...:Person) }]
                        GqlLinearOpsQuery [18-82] [EXISTS   {...:Person) }]
                          GqlOperatorList [34-80] [MATCH (n1:...n2:Person)]
                            GqlMatch [34-51] [MATCH (n1:Person)]
                              GraphPattern [40-51] [(n1:Person)]
                                GraphPathPattern [40-51] [(n1:Person)]
                                  GraphNodePattern [40-51] [(n1:Person)]
                                    GraphElementPatternFiller [41-50] [n1:Person]
                                      Identifier(n1) [41-43] [n1]
                                      GraphLabelFilter [43-50] [:Person]
                                        GraphElementLabel [44-50] [Person]
                                          Identifier(Person) [44-50] [Person]
                            GqlMatch (optional) [54-80] [OPTIONAL MATCH (n2:Person)]
                              GraphPattern [69-80] [(n2:Person)]
                                GraphPathPattern [69-80] [(n2:Person)]
                                  GraphNodePattern [69-80] [(n2:Person)]
                                    GraphElementPatternFiller [70-79] [n2:Person]
                                      Identifier(n2) [70-72] [n2]
                                      GraphLabelFilter [72-79] [:Person]
                                        GraphElementLabel [73-79] [Person]
                                          Identifier(Person) [73-79] [Person]
--
GRAPH aml
RETURN
  EXISTS {
    MATCH
      (n1
      IS Person)
    OPTIONAL MATCH
      (n2
      IS Person)
  }
--
ALTERNATION GROUP:  ,GRAPH fin
--
QueryStatement [0-91] [GRAPH aml...:Person) }]
  Query [0-91] [GRAPH aml...:Person) }]
    GqlQuery [0-91] [GRAPH aml...:Person) }]
      GraphTableQuery [0-91] [GRAPH aml...:Person) }]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [11-91] [RETURN EXISTS...:Person) }]
          GqlOperatorList [11-91] [RETURN EXISTS...:Person) }]
            GqlReturn [11-91] [RETURN EXISTS...:Person) }]
              Select [18-91] [EXISTS   {...:Person) }]
                SelectList [18-91] [EXISTS   {...:Person) }]
                  SelectColumn [18-91] [EXISTS   {...:Person) }]
                    ExpressionSubquery(modifier=EXISTS) [18-91] [EXISTS   {...:Person) }]
                      Query [18-91] [EXISTS   {...:Person) }]
                        GqlLinearOpsQuery [18-91] [EXISTS   {...:Person) }]
                          PathExpression [37-40] [fin]
                            Identifier(fin) [37-40] [fin]
                          GqlOperatorList [43-89] [MATCH (n1:...n2:Person)]
                            GqlMatch [43-60] [MATCH (n1:Person)]
                              GraphPattern [49-60] [(n1:Person)]
                                GraphPathPattern [49-60] [(n1:Person)]
                                  GraphNodePattern [49-60] [(n1:Person)]
                                    GraphElementPatternFiller [50-59] [n1:Person]
                                      Identifier(n1) [50-52] [n1]
                                      GraphLabelFilter [52-59] [:Person]
                                        GraphElementLabel [53-59] [Person]
                                          Identifier(Person) [53-59] [Person]
                            GqlMatch (optional) [63-89] [OPTIONAL MATCH (n2:Person)]
                              GraphPattern [78-89] [(n2:Person)]
                                GraphPathPattern [78-89] [(n2:Person)]
                                  GraphNodePattern [78-89] [(n2:Person)]
                                    GraphElementPatternFiller [79-88] [n2:Person]
                                      Identifier(n2) [79-81] [n2]
                                      GraphLabelFilter [81-88] [:Person]
                                        GraphElementLabel [82-88] [Person]
                                          Identifier(Person) [82-88] [Person]
--
GRAPH aml
RETURN
  EXISTS {
    GRAPH fin
    MATCH
      (n1
      IS Person)
    OPTIONAL MATCH
      (n2
      IS Person)
  }
--
ALTERNATION GROUP: @{hint=1} ,
--
QueryStatement [0-91] [GRAPH aml...:Person) }]
  Query [0-91] [GRAPH aml...:Person) }]
    GqlQuery [0-91] [GRAPH aml...:Person) }]
      GraphTableQuery [0-91] [GRAPH aml...:Person) }]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [11-91] [RETURN EXISTS...:Person) }]
          GqlOperatorList [11-91] [RETURN EXISTS...:Person) }]
            GqlReturn [11-91] [RETURN EXISTS...:Person) }]
              Select [18-91] [EXISTS @{hint...:Person) }]
                SelectList [18-91] [EXISTS @{hint...:Person) }]
                  SelectColumn [18-91] [EXISTS @{hint...:Person) }]
                    ExpressionSubquery(modifier=EXISTS) [18-91] [EXISTS @{hint...:Person) }]
                      Hint [25-34] [@{hint=1}]
                        HintEntry [27-33] [hint=1]
                          Identifier(hint) [27-31] [hint]
                          IntLiteral(1) [32-33] [1]
                      Query [18-91] [EXISTS @{hint...:Person) }]
                        GqlLinearOpsQuery [18-91] [EXISTS @{hint...:Person) }]
                          GqlOperatorList [43-89] [MATCH (n1:...n2:Person)]
                            GqlMatch [43-60] [MATCH (n1:Person)]
                              GraphPattern [49-60] [(n1:Person)]
                                GraphPathPattern [49-60] [(n1:Person)]
                                  GraphNodePattern [49-60] [(n1:Person)]
                                    GraphElementPatternFiller [50-59] [n1:Person]
                                      Identifier(n1) [50-52] [n1]
                                      GraphLabelFilter [52-59] [:Person]
                                        GraphElementLabel [53-59] [Person]
                                          Identifier(Person) [53-59] [Person]
                            GqlMatch (optional) [63-89] [OPTIONAL MATCH (n2:Person)]
                              GraphPattern [78-89] [(n2:Person)]
                                GraphPathPattern [78-89] [(n2:Person)]
                                  GraphNodePattern [78-89] [(n2:Person)]
                                    GraphElementPatternFiller [79-88] [n2:Person]
                                      Identifier(n2) [79-81] [n2]
                                      GraphLabelFilter [81-88] [:Person]
                                        GraphElementLabel [82-88] [Person]
                                          Identifier(Person) [82-88] [Person]
--
GRAPH aml
RETURN
  EXISTS @{ hint = 1 } {
    MATCH
      (n1
      IS Person)
    OPTIONAL MATCH
      (n2
      IS Person)
  }
--
ALTERNATION GROUP: @{hint=1} ,GRAPH fin
--
QueryStatement [0-100] [GRAPH aml...:Person) }]
  Query [0-100] [GRAPH aml...:Person) }]
    GqlQuery [0-100] [GRAPH aml...:Person) }]
      GraphTableQuery [0-100] [GRAPH aml...:Person) }]
        PathExpression [6-9] [aml]
          Identifier(aml) [6-9] [aml]
        GqlOperatorList [11-100] [RETURN EXISTS...:Person) }]
          GqlOperatorList [11-100] [RETURN EXISTS...:Person) }]
            GqlReturn [11-100] [RETURN EXISTS...:Person) }]
              Select [18-100] [EXISTS @{hint...:Person) }]
                SelectList [18-100] [EXISTS @{hint...:Person) }]
                  SelectColumn [18-100] [EXISTS @{hint...:Person) }]
                    ExpressionSubquery(modifier=EXISTS) [18-100] [EXISTS @{hint...:Person) }]
                      Hint [25-34] [@{hint=1}]
                        HintEntry [27-33] [hint=1]
                          Identifier(hint) [27-31] [hint]
                          IntLiteral(1) [32-33] [1]
                      Query [18-100] [EXISTS @{hint...:Person) }]
                        GqlLinearOpsQuery [18-100] [EXISTS @{hint...:Person) }]
                          PathExpression [46-49] [fin]
                            Identifier(fin) [46-49] [fin]
                          GqlOperatorList [52-98] [MATCH (n1:...n2:Person)]
                            GqlMatch [52-69] [MATCH (n1:Person)]
                              GraphPattern [58-69] [(n1:Person)]
                                GraphPathPattern [58-69] [(n1:Person)]
                                  GraphNodePattern [58-69] [(n1:Person)]
                                    GraphElementPatternFiller [59-68] [n1:Person]
                                      Identifier(n1) [59-61] [n1]
                                      GraphLabelFilter [61-68] [:Person]
                                        GraphElementLabel [62-68] [Person]
                                          Identifier(Person) [62-68] [Person]
                            GqlMatch (optional) [72-98] [OPTIONAL MATCH (n2:Person)]
                              GraphPattern [87-98] [(n2:Person)]
                                GraphPathPattern [87-98] [(n2:Person)]
                                  GraphNodePattern [87-98] [(n2:Person)]
                                    GraphElementPatternFiller [88-97] [n2:Person]
                                      Identifier(n2) [88-90] [n2]
                                      GraphLabelFilter [90-97] [:Person]
                                        GraphElementLabel [91-97] [Person]
                                          Identifier(Person) [91-97] [Person]
--
GRAPH aml
RETURN
  EXISTS @{ hint = 1 } {
    GRAPH fin
    MATCH
      (n1
      IS Person)
    OPTIONAL MATCH
      (n2
      IS Person)
  }

==

# Subquery with GRAPH doesn't work.
SELECT (GRAPH g RETURN 1 as one) as subquery
--
ERROR: Syntax error: Expected "," but got identifier "g" [at 1:15]
SELECT (GRAPH g RETURN 1 as one) as subquery
              ^
